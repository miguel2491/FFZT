
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Responsive Bootstrap 5 Admin &amp; Dashboard Template">
    <meta name="author" content="Bootlab">

    <title>Facturafast</title>

    <link rel="canonical" href="https://cfdi.facturafast.mx/" />
    <link rel="shortcut icon" href="~/img/favicon.png">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

    <!-- Choose your prefered color scheme -->
    <!-- <link href="css/light.css" rel="stylesheet"> -->
    <!-- <link href="css/dark.css" rel="stylesheet"> -->
    <!-- BEGIN SETTINGS -->
    <!-- Remove this after purchasing -->
    <link class="js-stylesheet" href="~/css/light.css" rel="stylesheet">
    <script src="~/js/settings.js"></script>
    <script src="~/js/utils.js"></script>
    <!-- END SETTINGS -->
    @*<script>
        (function (h, o, t, j, a, r) {
            h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments) };
            h._hjSettings = { hjid: 2120269, hjsv: 6 };
            a = o.getElementsByTagName('head')[0];
            r = o.createElement('script'); r.async = 1;
            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
            a.appendChild(r);
        })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q3ZYEKLQ68"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-Q3ZYEKLQ68');
    </script>*@
</head>
<!--
  HOW TO USE:
  data-theme: default (default), dark, light
  data-layout: fluid (default), boxed
  data-sidebar-position: left (default), right
  data-sidebar-behavior: sticky (default), fixed, compact
-->

<body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-behavior="sticky">
    <div class="main d-flex justify-content-center w-100">
        <main class="content d-flex p-0">
            <div class="container d-flex flex-column">
                <div class="row h-100">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100">
                        <div class="d-table-cell align-middle">

                            <div class="text-center mt-4">
                                <h1 class="h2">Bienvenido(a)</h1>
                                <p class="lead">
                                    Introduzca sus credenciales de acceso para continuar
                                </p>
                            </div>

                            <div class="card">
                                <div class="card-body">
                                    <div class="m-sm-4">
                                        <div class="text-center">
                                            <img src="~/img/logo-2x.png" class="img-fluid" />
                                        </div>
                                        <br /><br /><br />
                                        <form name="InicioSesion.Sesion" action="@Url.Action("InicioSesion","Sesion")" method="post" onsubmit="return validateForm()">
                                            <div class="mb-3">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control form-control-lg" required id="txtUsuario" name="txtUsuario" placeholder="Usuario">
                                                    <label for="txtUsuario">Usuario</label>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <div class="form-floating mb-3">
                                                    <input type="password" class="form-control form-control-lg" required id="txtPassword" name="txtPassword" placeholder="Contraseña">
                                                    <label for="txtPassword">Contraseña</label>
                                                </div>
                                                <small>
                                                    <a href="@Url.Action("RecuperarCredenciales","Sesion")">¿Olvidaste tu contraseña?</a>
                                                </small>
                                            </div>
                                            <div>
                                                <div class="form-check align-items-center">
                                                    <input id="remember" name="remember" type="checkbox" class="form-check-input">
                                                    <label class="form-check-label text-small" for="customControlInline">Mantener activa la sesión.</label>
                                                </div>
                                            </div>
                                            <br />
                                            <div class="text-center mt-3">
                                                <button type="submit" class="btn btn-lg btn-success"><i class="fas fa-lock"></i>&nbsp;&nbsp;&nbsp; Iniciar Sesión</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="~/js/app.js"></script>


    <script>

        @if (ViewBag.Clear != null)
    {
        @: localStorage.clear();
    }

        document.addEventListener("DOMContentLoaded", async function () {
            @if (ViewBag.Mensaje != null)
            {
                <text>
                    notificacionAlert("@ViewBag.Mensaje", "@ViewBag.TMensaje");                    
                </text>
            }

            var uValue = localStorage.getItem("usu");
        var pValue = localStorage.getItem("pass");

        if (uValue != null && uValue != "") {
            if (pValue != null && pValue != "") {
                abrirCargando();
                $.get("@Url.Action("SesionAutomatica","Sesion")?user=" + uValue + "&pass=" + pValue, function (data) {

                    if (data == "Correcto") {
                        window.location = "@Url.Action("Inicio","Panel")";
                    }
                    cerrarCargando();
                });
            }
        }

        });

        function validateForm() {
            let usuario = document.forms["InicioSesion.Sesion"]["txtUsuario"].value;
            let password = document.forms["InicioSesion.Sesion"]["txtPassword"].value;
            if (usuario != "" && password != "") {
                abrirCargando();
                return true;
            }
            return false;
        }
    </script>


    <div class="modal fade" id="modalCargando" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <br />
                    <div class="row">
                        <div class="col-md-2">

                        </div>
                        <div class="col-md-8 text-center">
                            <div class="spinner-grow spinner-grow-sm text-success me-2" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="spinner-grow spinner-grow-sm text-success me-2" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="spinner-grow spinner-grow-sm text-success me-2" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="spinner-grow spinner-grow-sm text-success me-2" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <br /><br />
                            <h3>Procesando solicitud...</h3>
                        </div>
                        <div class="col-md-2">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>
